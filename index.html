<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OneStop Pemulihan SKSA</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Noto+Sans+Malay:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --primary: #1a56db;
    --primary-light: #e8f0fe;
    --primary-dark: #1340a8;
    --secondary: #f9a825;
    --secondary-light: #fff8e1;
    --success: #10b981;
    --success-light: #d1fae5;
    --danger: #ef4444;
    --danger-light: #fee2e2;
    --warning: #f59e0b;
    --warning-light: #fef3c7;
    --bg: #f0f4ff;
    --card: #ffffff;
    --sidebar-w: 240px;
    --text: #1e293b;
    --text-muted: #64748b;
    --border: #e2e8f0;
    --shadow: 0 2px 12px rgba(26,86,219,0.08);
    --shadow-lg: 0 8px 32px rgba(26,86,219,0.15);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }

  /* Sidebar */
  .sidebar {
    position: fixed; left: 0; top: 0; bottom: 0; width: var(--sidebar-w);
    background: linear-gradient(180deg, #0f2d6b 0%, #1a56db 100%);
    color: white; z-index: 100; display: flex; flex-direction: column;
    box-shadow: 4px 0 20px rgba(26,86,219,0.3);
    transition: transform 0.3s ease;
  }
  .sidebar.collapsed { transform: translateX(-100%); }
  .sidebar-logo {
    padding: 20px 16px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.12);
    display: flex; align-items: center; gap: 10px;
  }
  .sidebar-logo .school-badge {
    width: 40px; height: 40px; background: var(--secondary);
    border-radius: 10px; display: flex; align-items: center; justify-content: center;
    font-size: 18px; font-weight: 800; color: #0f2d6b; flex-shrink: 0;
  }
  .sidebar-logo .school-name { font-size: 11px; font-weight: 700; line-height: 1.3; opacity: 0.95; }
  .sidebar-logo .school-sub { font-size: 9.5px; opacity: 0.65; font-weight: 500; margin-top: 2px; }
  .sidebar-nav { flex: 1; padding: 12px 0; overflow-y: auto; }
  .nav-section { padding: 8px 16px 4px; font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.45; font-weight: 700; }
  .nav-item {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
    transition: all 0.2s; border-left: 3px solid transparent; margin: 1px 0;
    color: rgba(255,255,255,0.75);
  }
  .nav-item:hover { background: rgba(255,255,255,0.1); color: white; }
  .nav-item.active { background: rgba(255,255,255,0.15); color: white; border-left-color: var(--secondary); font-weight: 700; }
  .nav-item .icon { font-size: 16px; width: 20px; text-align: center; flex-shrink: 0; }
  .sidebar-footer { padding: 12px 16px; border-top: 1px solid rgba(255,255,255,0.12); }
  .teacher-badge { display: flex; align-items: center; gap: 8px; }
  .teacher-avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--secondary); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 12px; color: #0f2d6b; flex-shrink: 0; }
  .teacher-info .name { font-size: 11px; font-weight: 700; }
  .teacher-info .role { font-size: 10px; opacity: 0.55; }

  /* Main */
  .main { margin-left: var(--sidebar-w); min-height: 100vh; }
  .topbar {
    background: white; padding: 12px 24px; display: flex; align-items: center; justify-content: space-between;
    border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 50;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }
  .topbar-left { display: flex; align-items: center; gap: 12px; }
  .menu-btn { background: none; border: none; cursor: pointer; padding: 6px; border-radius: 8px; font-size: 18px; color: var(--text-muted); }
  .menu-btn:hover { background: var(--bg); }
  .breadcrumb { font-size: 13px; color: var(--text-muted); }
  .breadcrumb span { color: var(--primary); font-weight: 600; }
  .topbar-right { display: flex; align-items: center; gap: 10px; }
  .date-badge { background: var(--primary-light); color: var(--primary); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }

  .content { padding: 24px; }

  /* Cards */
  .card { background: white; border-radius: 16px; box-shadow: var(--shadow); overflow: hidden; }
  .card-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
  .card-title { font-size: 15px; font-weight: 700; color: var(--text); }
  .card-body { padding: 20px; }

  /* Stats grid */
  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
  .stat-card {
    background: white; border-radius: 16px; padding: 20px;
    box-shadow: var(--shadow); display: flex; align-items: center; gap: 14px;
    border-left: 4px solid transparent; transition: transform 0.2s;
  }
  .stat-card:hover { transform: translateY(-2px); }
  .stat-card.blue { border-left-color: var(--primary); }
  .stat-card.green { border-left-color: var(--success); }
  .stat-card.yellow { border-left-color: var(--secondary); }
  .stat-card.red { border-left-color: var(--danger); }
  .stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
  .stat-icon.blue { background: var(--primary-light); }
  .stat-icon.green { background: var(--success-light); }
  .stat-icon.yellow { background: var(--secondary-light); }
  .stat-icon.red { background: var(--danger-light); }
  .stat-value { font-size: 28px; font-weight: 800; color: var(--text); line-height: 1; }
  .stat-label { font-size: 12px; color: var(--text-muted); font-weight: 500; margin-top: 2px; }

  /* Buttons */
  .btn { padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; font-size: 13px; font-weight: 600; font-family: inherit; transition: all 0.2s; display: inline-flex; align-items: center; gap: 6px; }
  .btn-primary { background: var(--primary); color: white; }
  .btn-primary:hover { background: var(--primary-dark); }
  .btn-secondary { background: var(--secondary); color: #0f2d6b; }
  .btn-success { background: var(--success); color: white; }
  .btn-danger { background: var(--danger); color: white; }
  .btn-outline { background: transparent; border: 1.5px solid var(--border); color: var(--text-muted); }
  .btn-outline:hover { border-color: var(--primary); color: var(--primary); }
  .btn-sm { padding: 5px 10px; font-size: 12px; border-radius: 6px; }

  /* Table */
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; }
  th { background: var(--bg); padding: 10px 12px; text-align: left; font-size: 12px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap; }
  td { padding: 10px 12px; font-size: 13px; border-bottom: 1px solid var(--border); }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: var(--bg); }

  /* Badges */
  .badge { padding: 3px 8px; border-radius: 20px; font-size: 11px; font-weight: 700; display: inline-block; }
  .badge-bm { background: #dbeafe; color: #1d4ed8; }
  .badge-math { background: #fef3c7; color: #92400e; }
  .badge-2g { background: #ede9fe; color: #5b21b6; }
  .badge-3b { background: #fee2e2; color: #991b1b; }
  .badge-4g { background: #d1fae5; color: #065f46; }
  .badge-5c { background: #ffedd5; color: #9a3412; }
  .badge-hadir { background: var(--success-light); color: #065f46; }
  .badge-tidak { background: var(--danger-light); color: #991b1b; }
  .badge-mc { background: var(--warning-light); color: #92400e; }

  /* Form */
  .form-group { margin-bottom: 16px; }
  label { display: block; font-size: 12px; font-weight: 700; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.05em; }
  input, select, textarea { width: 100%; padding: 9px 12px; border: 1.5px solid var(--border); border-radius: 8px; font-size: 13px; font-family: inherit; color: var(--text); transition: border 0.2s; background: white; }
  input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(26,86,219,0.1); }
  .form-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .form-grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

  /* Modal */
  .modal-overlay { position: fixed; inset: 0; background: rgba(15,45,107,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px); }
  .modal { background: white; border-radius: 20px; width: 100%; max-width: 560px; box-shadow: var(--shadow-lg); max-height: 90vh; overflow-y: auto; }
  .modal-header { padding: 20px 24px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
  .modal-title { font-size: 17px; font-weight: 800; }
  .modal-close { background: none; border: none; cursor: pointer; font-size: 20px; color: var(--text-muted); padding: 4px; border-radius: 6px; }
  .modal-close:hover { background: var(--bg); }
  .modal-body { padding: 24px; }
  .modal-footer { padding: 16px 24px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 8px; }

  /* Kehadiran Grid */
  .kehadiran-grid { overflow-x: auto; }
  .kehadiran-grid table th, .kehadiran-grid table td { padding: 6px 4px; font-size: 11px; text-align: center; min-width: 26px; }
  .kehadiran-grid table td:first-child, .kehadiran-grid table th:first-child { text-align: left; min-width: 140px; font-weight: 600; padding-left: 10px; }
  .kehadiran-grid table td:nth-child(2), .kehadiran-grid table th:nth-child(2) { min-width: 40px; }
  .cell-H { background: #d1fae5; color: #065f46; font-weight: 700; border-radius: 4px; cursor: pointer; }
  .cell-T { background: #fee2e2; color: #991b1b; font-weight: 700; border-radius: 4px; cursor: pointer; }
  .cell-MC { background: #fef3c7; color: #92400e; font-weight: 700; border-radius: 4px; cursor: pointer; font-size: 9px; }
  .cell-empty { background: #f8fafc; color: #cbd5e1; cursor: pointer; border-radius: 4px; }
  .cell-noclass { background: #f1f5f9; color: #94a3b8; font-size: 10px; }
  .pct-good { color: var(--success); font-weight: 700; }
  .pct-warn { color: var(--warning); font-weight: 700; }
  .pct-bad { color: var(--danger); font-weight: 700; }

  /* Jadual Waktu */
  .jadual-grid { overflow-x: auto; }
  .jadual-grid table { min-width: 700px; }
  .jadual-grid th { background: #0f2d6b; color: white; text-align: center; font-size: 12px; }
  .jadual-grid td { text-align: center; font-size: 11.5px; min-height: 44px; vertical-align: middle; }
  .slot-bm-2g { background: #ede9fe; color: #5b21b6; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-bm-3b { background: #fee2e2; color: #991b1b; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-bm-4g { background: #d1fae5; color: #065f46; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-bm-5c { background: #ffedd5; color: #9a3412; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-mt-2g { background: #c4b5fd; color: #3730a3; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-mt-3b { background: #fca5a5; color: #7f1d1d; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-mt-4g { background: #6ee7b7; color: #064e3b; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-mt-5c { background: #fdba74; color: #7c2d12; font-weight: 700; border-radius: 6px; padding: 4px 6px; }
  .slot-per { background: #dbeafe; color: #1e40af; font-weight: 700; border-radius: 6px; padding: 4px 6px; font-size: 10px; }
  .slot-wp { background: #fce7f3; color: #831843; font-weight: 700; border-radius: 6px; padding: 4px 6px; font-size: 10px; }
  .slot-koko { background: #f0fdf4; color: #166534; font-weight: 700; border-radius: 6px; padding: 4px 6px; font-size: 10px; }
  .slot-1m1s { background: #e0f2fe; color: #075985; font-weight: 700; border-radius: 6px; padding: 4px 6px; font-size: 10px; }
  .slot-empty { color: #cbd5e1; font-size: 10px; }

  /* Analisa */
  .analisa-cell { display: flex; align-items: center; justify-content: center; gap: 4px; }
  .status-lulus { color: var(--success); font-size: 18px; cursor: pointer; }
  .status-gagal { color: var(--danger); font-size: 18px; cursor: pointer; }
  .status-null { color: #cbd5e1; font-size: 18px; cursor: pointer; }

  /* Toast */
  .toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 9999; display: flex; flex-direction: column; gap: 8px; }
  .toast { background: #1e293b; color: white; padding: 12px 18px; border-radius: 12px; font-size: 13px; font-weight: 600; box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 8px; animation: slideIn 0.3s ease; min-width: 250px; }
  .toast.success { border-left: 4px solid var(--success); }
  .toast.error { border-left: 4px solid var(--danger); }
  @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

  /* Dashboard quick links */
  .quick-links { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
  .quick-link { background: white; border-radius: 14px; padding: 16px; cursor: pointer; transition: all 0.2s; box-shadow: var(--shadow); display: flex; flex-direction: column; align-items: center; gap: 8px; text-align: center; border: 2px solid transparent; }
  .quick-link:hover { border-color: var(--primary); transform: translateY(-2px); }
  .quick-link .ql-icon { font-size: 28px; }
  .quick-link .ql-label { font-size: 12px; font-weight: 700; color: var(--text); }

  /* Filter bar */
  .filter-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 16px; align-items: center; }
  .filter-bar input, .filter-bar select { width: auto; flex: 1; min-width: 140px; }

  /* Section header */
  .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
  .section-title { font-size: 20px; font-weight: 800; color: var(--text); }
  .section-sub { font-size: 13px; color: var(--text-muted); margin-top: 2px; }

  /* Analisa summary table */
  .summary-table th { background: #0f2d6b; color: white; }
  .summary-table td { text-align: center; }
  .summary-table td:first-child { text-align: left; font-weight: 700; }

  /* Legend */
  .legend { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
  .legend-item { display: flex; align-items: center; gap: 5px; font-size: 12px; font-weight: 600; }
  .legend-dot { width: 14px; height: 14px; border-radius: 3px; }

  /* Tabs */
  .tabs { display: flex; gap: 0; margin-bottom: 20px; background: var(--bg); border-radius: 10px; padding: 4px; width: fit-content; }
  .tab { padding: 8px 16px; border-radius: 7px; cursor: pointer; font-size: 13px; font-weight: 600; color: var(--text-muted); transition: all 0.2s; }
  .tab.active { background: white; color: var(--primary); box-shadow: 0 1px 6px rgba(0,0,0,0.08); }

  /* Laporan */
  .laporan-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .laporan-card { background: white; border-radius: 14px; padding: 20px; box-shadow: var(--shadow); cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
  .laporan-card:hover { border-color: var(--primary); }
  .laporan-card .lc-icon { font-size: 32px; margin-bottom: 10px; }
  .laporan-card .lc-title { font-size: 14px; font-weight: 700; margin-bottom: 4px; }
  .laporan-card .lc-desc { font-size: 12px; color: var(--text-muted); }

  /* Progress bar */
  .progress-bar { height: 8px; background: var(--border); border-radius: 99px; overflow: hidden; }
  .progress-fill { height: 100%; border-radius: 99px; transition: width 0.6s ease; }

  /* Checkbox group */
  .checkbox-group { display: flex; gap: 16px; flex-wrap: wrap; }
  .checkbox-item { display: flex; align-items: center; gap: 6px; font-size: 13px; font-weight: 500; cursor: pointer; }
  .checkbox-item input[type="checkbox"] { width: auto; cursor: pointer; }

  /* Print styles */
  @media print {
    .sidebar, .topbar, .no-print { display: none !important; }
    .main { margin-left: 0 !important; }
    .content { padding: 10px !important; }
  }

  /* Responsive */
  @media (max-width: 768px) {
    :root { --sidebar-w: 0px; }
    .sidebar { transform: translateX(-100%); --sidebar-w: 240px; }
    .sidebar.open { transform: translateX(0); }
    .main { margin-left: 0; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .quick-links { grid-template-columns: repeat(2, 1fr); }
    .laporan-grid { grid-template-columns: 1fr; }
    .form-grid-2, .form-grid-3 { grid-template-columns: 1fr; }
  }

  .page { display: none; }
  .page.active { display: block; }

  /* Skill level */
  .skill-badge { display: inline-block; background: #f1f5f9; color: var(--text-muted); font-size: 10px; font-weight: 600; padding: 2px 7px; border-radius: 99px; margin: 1px; }

  .murid-card { background: white; border-radius: 12px; border: 1.5px solid var(--border); padding: 14px 16px; display: flex; align-items: center; gap: 12px; transition: all 0.2s; }
  .murid-card:hover { border-color: var(--primary); box-shadow: var(--shadow); }
  .murid-avatar { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 800; flex-shrink: 0; }
  .murid-info { flex: 1; min-width: 0; }
  .murid-name { font-size: 13px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .murid-meta { font-size: 11px; color: var(--text-muted); margin-top: 3px; display: flex; gap: 6px; flex-wrap: wrap; }
  .murid-actions { display: flex; gap: 4px; flex-shrink: 0; }

  .section-divider { height: 1px; background: var(--border); margin: 20px 0; }
  .text-center { text-align: center; }
  .text-muted { color: var(--text-muted); font-size: 13px; }
  .font-bold { font-weight: 700; }
  .mt-1 { margin-top: 8px; }
  .mt-2 { margin-top: 16px; }
  .mt-3 { margin-top: 24px; }
  .gap-8 { gap: 8px; }
  .flex { display: flex; }
  .flex-wrap { flex-wrap: wrap; }
  .items-center { align-items: center; }
  .justify-between { justify-content: space-between; }
  .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }

  .info-box { background: var(--primary-light); border-left: 4px solid var(--primary); padding: 12px 16px; border-radius: 0 8px 8px 0; font-size: 13px; color: var(--primary); margin-bottom: 16px; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useMemo, useCallback } = React;

// ============ INITIAL DATA ============
const SEKOLAH = {
  nama: "SEKOLAH KEBANGSAAN SRI AMAN",
  alamat: "Jalan Kampung Melayu, 11500 Ayer Itam, Pulau Pinang",
  tel: "04-8287715",
  emel: "pbb1013@jpnpp.edu.my",
  guru: "ASQALANI BIN SUHAIMI",
  sesi: "2026"
};

const KELAS_LIST = ["2G", "3B", "4G", "5C"];
const BULAN_LIST = ["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"];

const MURID_INITIAL = [
  // 2G - BM
  { id:"m001", nama:"AYRA ELIZA BINTI ABDUL AKHIR", no_mykid:"181011011916", kelas:"2G", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m002", nama:"RIYAD ANAQI BIN RASYIDI", no_mykid:"190203014231", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m003", nama:"MOHD SHAHNAQEEF BIN MOHD NAZRI", no_mykid:"190511014321", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m004", nama:"MUHAMAD AL FATTAH BIN RIZAL", no_mykid:"190812013421", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM","MT"], catatan:"" },
  { id:"m005", nama:"MUHAMMAD AQMAL NAUFAL BIN AZLAN", no_mykid:"190303014112", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m006", nama:"MUHAMMAD RAYYAN SYAZWAN", no_mykid:"191105013211", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m007", nama:"MUHAMMAD SHAZRIQ AZRA", no_mykid:"190707014231", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM","MT"], catatan:"" },
  { id:"m008", nama:"MUHAMMAD SYAKIR ZAKWAN", no_mykid:"190909013421", kelas:"2G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m009", nama:"NOOR AYRA AISYAH BINTI ROSLAN", no_mykid:"191212012341", kelas:"2G", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m010", nama:"NUR IFFATULELZAHRAH BINTI ZULKIFLI", no_mykid:"190404013211", kelas:"2G", bangsa:"M", jantina:"P", subjek:["BM","MT"], catatan:"" },
  // 3B - BM
  { id:"m011", nama:"VENISSA MARRY NAIDU A/P RAJAN", no_mykid:"181115021231", kelas:"3B", bangsa:"I", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m012", nama:"NUR RAISYA BINTI RAHIMI", no_mykid:"181207013421", kelas:"3B", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m013", nama:"NUR ZARRA ALEYSHA BINTI ZARITH", no_mykid:"180808013211", kelas:"3B", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m014", nama:"KEISHA JANNAH BINTI KHALID", no_mykid:"180303012341", kelas:"3B", bangsa:"M", jantina:"P", subjek:["BM","MT"], catatan:"" },
  { id:"m015", nama:"MOHAMAD ADAM HAFIZ BIN ANUAR", no_mykid:"181010013421", kelas:"3B", bangsa:"M", jantina:"L", subjek:["BM","MT"], catatan:"" },
  { id:"m016", nama:"MUHAMMAD AKID IZWAN BIN AZRI", no_mykid:"180505013211", kelas:"3B", bangsa:"M", jantina:"L", subjek:["BM","MT"], catatan:"" },
  // 4G - BM
  { id:"m017", nama:"MUHAMMAD RAYYAN MIKHAIL BIN IZWAN", no_mykid:"170606013421", kelas:"4G", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m018", nama:"MUZAKKIR MUSTAFA BIN MUSA", no_mykid:"170404013211", kelas:"4G", bangsa:"M", jantina:"L", subjek:["BM","MT"], catatan:"" },
  { id:"m019", nama:"SHAZMIA ELLYSYA BINTI SHAHRIL", no_mykid:"170808012341", kelas:"4G", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m020", nama:"NUR ALIYA ADAWIYAH BINTI AZMAN", no_mykid:"170303013421", kelas:"4G", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m021", nama:"NUR A'FIDAA NATASHA BINTI ZAKI", no_mykid:"171212013211", kelas:"4G", bangsa:"M", jantina:"P", subjek:["BM","MT"], catatan:"" },
  { id:"m022", nama:"PALLAVEE A/P SANGKARAN", no_mykid:"170909021231", kelas:"4G", bangsa:"I", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m023", nama:"SHARANI A/P KESEVAN", no_mykid:"171111021341", kelas:"4G", bangsa:"I", jantina:"P", subjek:["BM","MT"], catatan:"" },
  // 5C - BM
  { id:"m024", nama:"MUHAMMAD ARYAN EZWAN BIN AZRUL", no_mykid:"160707013421", kelas:"5C", bangsa:"M", jantina:"L", subjek:["BM"], catatan:"" },
  { id:"m025", nama:"NUR AEERA SYAFINA BINTI RAZALI", no_mykid:"160404013211", kelas:"5C", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m026", nama:"NUR FATIHAH UMAIRAH BINTI FADZIL", no_mykid:"161010012341", kelas:"5C", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  { id:"m027", nama:"NOOR SAMSILA BINTI SAMSUDIN", no_mykid:"160505013421", kelas:"5C", bangsa:"M", jantina:"P", subjek:["BM"], catatan:"" },
  // 5C - MT sahaja
  { id:"m028", nama:"NUR RANIA DAMIA BINTI RASHDAN", no_mykid:"161203013211", kelas:"5C", bangsa:"M", jantina:"P", subjek:["MT"], catatan:"" },
];

const JADUAL_GURU = {
  ISNIN: [
    {label:"PER", cls:"per"},{label:"BM 4G", cls:"bm-4g"},{label:"BM 4G", cls:"bm-4g"},
    {label:"-", cls:"empty"},{label:"MT 5C", cls:"mt-5c"},{label:"MT 5C", cls:"mt-5c"},
    {label:"-", cls:"empty"},{label:"BM 3B", cls:"bm-3b"},{label:"BM 3B", cls:"bm-3b"},
    {label:"-", cls:"empty"},{label:"-", cls:"empty"},{label:"-", cls:"empty"}
  ],
  SELASA: [
    {label:"-", cls:"empty"},{label:"BM 5C", cls:"bm-5c"},{label:"BM 5C", cls:"bm-5c"},
    {label:"-", cls:"empty"},{label:"MT 4G", cls:"mt-4g"},{label:"MT 4G", cls:"mt-4g"},
    {label:"-", cls:"empty"},{label:"BM 2G", cls:"bm-2g"},{label:"BM 2G", cls:"bm-2g"},
    {label:"MT 2G", cls:"mt-2g"},{label:"MT 2G", cls:"mt-2g"},{label:"-", cls:"empty"}
  ],
  RABU: [
    {label:"1M1S", cls:"1m1s"},{label:"1M1S", cls:"1m1s"},{label:"-", cls:"empty"},
    {label:"WP", cls:"wp"},{label:"WP", cls:"wp"},{label:"-", cls:"empty"},
    {label:"BM 3B", cls:"bm-3b"},{label:"BM 3B", cls:"bm-3b"},{label:"-", cls:"empty"},
    {label:"BM 4G", cls:"bm-4g"},{label:"BM 4G", cls:"bm-4g"},{label:"KOKO", cls:"koko"}
  ],
  KHAMIS: [
    {label:"-", cls:"empty"},{label:"BM 5C", cls:"bm-5c"},{label:"BM 5C", cls:"bm-5c"},
    {label:"-", cls:"empty"},{label:"-", cls:"empty"},{label:"BM 3B", cls:"bm-3b"},
    {label:"BM 3B", cls:"bm-3b"},{label:"BM 2G", cls:"bm-2g"},{label:"BM 2G", cls:"bm-2g"},
    {label:"-", cls:"empty"},{label:"-", cls:"empty"},{label:"BM 4G&5G", cls:"bm-4g"}
  ],
  JUMAAT: [
    {label:"BM 2G", cls:"bm-2g"},{label:"BM 2G", cls:"bm-2g"},{label:"-", cls:"empty"},
    {label:"WP", cls:"wp"},{label:"WP", cls:"wp"},{label:"MT 3B", cls:"mt-3b"},
    {label:"MT 3B", cls:"mt-3b"},{label:"-", cls:"empty"},{label:"-", cls:"empty"},
    {label:"-", cls:"empty"},{label:"-", cls:"empty"},{label:"-", cls:"empty"}
  ]
};

const WAKTU_SLOTS = [
  "7.40‚Äì8.10","8.10‚Äì8.40","8.40‚Äì9.10","9.10‚Äì9.40","9.40‚Äì10.10","10.10‚Äì10.40",
  "10.40‚Äì11.10","11.10‚Äì11.40","11.40‚Äì12.10","12.10‚Äì12.40","12.40‚Äì1.10","1.10‚Äì1.40"
];

const KEMAHIRAN_BM = [
  "KP (Prabacaan & Pratulisan)",
  "KP1 - Huruf vokal","KP2 - Huruf kecil","KP3 - Huruf besar",
  "KP4 - Suku kata KV","KP9 - Suku kata KVK","KP17 - Suku Kata KVKK",
  "KP5 - Perkataan KV+KV","KP6 - Perkataan V+KV","KP7 - Perkataan KV+KV+KV",
  "KP8 - Perkataan KVK","KP10 - Perkataan V+KVK","KP11 - Perkataan KV+KVK",
  "KP12 - Perkataan KVK+KV","KP13 - Perkataan KVK+KVK","KP16 - Perkataan KVKK",
  "KP20 - Perkataan KVK+KVKK","KP31 - Membaca ayat mudah","KP32 - Bacaan & Pemahaman"
];

const KEMAHIRAN_MT = [
  "1 - Pra Nombor","2 - Konsep Nombor",
  "3.1 - Nombor Bulat Hingga 10","3.2 - Nombor Bulat Hingga 20",
  "3.3 - Nombor Bulat Hingga 100","3.4 - Nombor Bulat Hingga 1000",
  "4.1 - Tambah Dlm Lingkungan 10","4.2 - Tambah Dlm Lingkungan 18",
  "4.3 - Tambah Dlm Lingkungan 100","4.4 - Tambah Dlm Lingkungan 1000",
  "5.1 - Tolak Dlm Lingkungan 10","5.2 - Tolak Dlm Lingkungan 18",
  "5.3 - Tolak Dlm Lingkungan 100","6 - Operasi Darab","7 - Operasi Bahagi",
  "8.1 - Wang Hingga RM10","8.2 - Wang Hingga RM100","9 - Masa dan Waktu"
];

// ============ UTILS ============
function loadData(key, def) {
  try { const d = localStorage.getItem(key); return d ? JSON.parse(d) : def; } catch { return def; }
}
function saveData(key, val) {
  try { localStorage.setItem(key, JSON.stringify(val)); } catch {}
}

function getDaysInMonth(month, year) {
  return new Date(year, month, 0).getDate();
}

function getPct(hadir, total) {
  if (!total) return 0;
  return Math.round((hadir / total) * 100);
}

function pctClass(pct) {
  if (pct >= 80) return "pct-good";
  if (pct >= 60) return "pct-warn";
  return "pct-bad";
}

function todayStr() {
  const d = new Date();
  return `${d.getDate()} ${BULAN_LIST[d.getMonth()]} ${d.getFullYear()}`;
}

function getTodayDay() {
  const days = ["AHAD","ISNIN","SELASA","RABU","KHAMIS","JUMAAT","SABTU"];
  return days[new Date().getDay()];
}

function getClassColor(kelas) {
  const map = {"2G":"#ede9fe","3B":"#fee2e2","4G":"#d1fae5","5C":"#ffedd5"};
  return map[kelas] || "#f1f5f9";
}

function getClassTextColor(kelas) {
  const map = {"2G":"#5b21b6","3B":"#991b1b","4G":"#065f46","5C":"#9a3412"};
  return map[kelas] || "#334155";
}

function getInitials(nama) {
  return nama.split(" ").slice(0,2).map(w => w[0]).join("");
}

// ============ TOAST ============
function Toast({ toasts, removeToast }) {
  return (
    <div className="toast-container">
      {toasts.map(t => (
        <div key={t.id} className={`toast ${t.type}`}>
          <span>{t.type === "success" ? "‚úÖ" : "‚ùå"}</span>
          {t.msg}
        </div>
      ))}
    </div>
  );
}

// ============ APP ============
function App() {
  const [page, setPage] = useState("dashboard");
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const [murid, setMurid] = useState(() => loadData("murid_sksa", MURID_INITIAL));
  const [kehadiran, setKehadiran] = useState(() => loadData("kehadiran_sksa", {}));
  const [analisa, setAnalisa] = useState(() => loadData("analisa_sksa", {}));
  const [settings, setSettings] = useState(() => loadData("settings_sksa", SEKOLAH));
  const [toasts, setToasts] = useState([]);

  useEffect(() => { saveData("murid_sksa", murid); }, [murid]);
  useEffect(() => { saveData("kehadiran_sksa", kehadiran); }, [kehadiran]);
  useEffect(() => { saveData("analisa_sksa", analisa); }, [analisa]);
  useEffect(() => { saveData("settings_sksa", settings); }, [settings]);

  const addToast = useCallback((msg, type="success") => {
    const id = Date.now();
    setToasts(p => [...p, {id, msg, type}]);
    setTimeout(() => setToasts(p => p.filter(t => t.id !== id)), 3000);
  }, []);

  const navItems = [
    { id:"dashboard", icon:"üè†", label:"Dashboard" },
    { id:"murid", icon:"üë•", label:"Senarai Murid" },
    { id:"kehadiran", icon:"üìã", label:"Rekod Kehadiran" },
    { id:"analisa", icon:"üìä", label:"Analisa BAPM-PMK" },
    { id:"jadual", icon:"üìÖ", label:"Jadual Waktu" },
    { id:"kemahiran", icon:"üìö", label:"Kemahiran Pemulihan" },
    { id:"laporan", icon:"üìÑ", label:"Laporan & Eksport" },
    { id:"tetapan", icon:"‚öôÔ∏è", label:"Tetapan" },
  ];

  const pageTitles = {
    dashboard:"Dashboard",murid:"Senarai Murid",kehadiran:"Rekod Kehadiran",
    analisa:"Analisa BAPM-PMK",jadual:"Jadual Waktu",kemahiran:"Kemahiran Pemulihan",
    laporan:"Laporan & Eksport",tetapan:"Tetapan"
  };

  return (
    <div>
      {/* Sidebar Overlay */}
      {sidebarOpen && <div style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",zIndex:99}} onClick={()=>setSidebarOpen(false)} className="no-print"/>}

      {/* Sidebar */}
      <nav className={`sidebar no-print ${sidebarOpen ? "open" : ""}`}>
        <div className="sidebar-logo">
          <div className="school-badge">SK</div>
          <div>
            <div className="school-name">SK SRI AMAN</div>
            <div className="school-sub">Program Pemulihan Khas {settings.sesi}</div>
          </div>
        </div>
        <div className="sidebar-nav">
          <div className="nav-section">Menu Utama</div>
          {navItems.map(n => (
            <div key={n.id} className={`nav-item ${page===n.id?"active":""}`}
              onClick={()=>{setPage(n.id);setSidebarOpen(false);}}>
              <span className="icon">{n.icon}</span>
              <span>{n.label}</span>
            </div>
          ))}
        </div>
        <div className="sidebar-footer">
          <div className="teacher-badge">
            <div className="teacher-avatar">{settings.guru.split(" ").slice(0,2).map(w=>w[0]).join("")}</div>
            <div className="teacher-info">
              <div className="name">{settings.guru.split(" ")[0]} {settings.guru.split(" ")[1]}</div>
              <div className="role">Guru Pemulihan Khas</div>
            </div>
          </div>
        </div>
      </nav>

      {/* Main */}
      <main className="main">
        <div className="topbar no-print">
          <div className="topbar-left">
            <button className="menu-btn" onClick={()=>setSidebarOpen(!sidebarOpen)}>‚ò∞</button>
            <div className="breadcrumb">OneStop Pemulihan ‚Üí <span>{pageTitles[page]}</span></div>
          </div>
          <div className="topbar-right">
            <div className="date-badge">üìÖ {todayStr()}</div>
          </div>
        </div>
        <div className="content">
          {page==="dashboard" && <Dashboard murid={murid} kehadiran={kehadiran} analisa={analisa} settings={settings} setPage={setPage} />}
          {page==="murid" && <MuridPage murid={murid} setMurid={setMurid} addToast={addToast} />}
          {page==="kehadiran" && <KehadiranPage murid={murid} kehadiran={kehadiran} setKehadiran={setKehadiran} addToast={addToast} />}
          {page==="analisa" && <AnalisaPage murid={murid} analisa={analisa} setAnalisa={setAnalisa} addToast={addToast} />}
          {page==="jadual" && <JadualPage />}
          {page==="kemahiran" && <KemahiranPage />}
          {page==="laporan" && <LaporanPage murid={murid} kehadiran={kehadiran} analisa={analisa} addToast={addToast} />}
          {page==="tetapan" && <TetapanPage settings={settings} setSettings={setSettings} murid={murid} setMurid={setMurid} kehadiran={kehadiran} setKehadiran={setKehadiran} analisa={analisa} setAnalisa={setAnalisa} addToast={addToast} />}
        </div>
      </main>

      <Toast toasts={toasts} removeToast={(id)=>setToasts(p=>p.filter(t=>t.id!==id))} />
    </div>
  );
}

// ============ DASHBOARD ============
function Dashboard({ murid, kehadiran, analisa, settings, setPage }) {
  const totalBM = murid.filter(m=>m.subjek.includes("BM")).length;
  const totalMT = murid.filter(m=>m.subjek.includes("MT")).length;
  const today = getTodayDay();
  const todaySlots = JADUAL_GURU[today] || [];
  const activeTodaySlots = todaySlots.filter(s=>s.cls!=="empty");

  // Kehadiran bulan ini
  const now = new Date();
  const bulanKey = `${BULAN_LIST[now.getMonth()]}_${now.getFullYear()}`;
  let totalH=0, totalAll=0;
  Object.values(kehadiran[bulanKey] || {}).forEach(kd => {
    Object.values(kd).forEach(rec => {
      Object.values(rec).forEach(v => {
        if(v==="H"||v==="T"||v==="MC") { totalAll++; if(v==="H") totalH++; }
      });
    });
  });
  const pctHadir = totalAll ? getPct(totalH, totalAll) : null;

  // Analisa stats
  let totalLulus=0, totalGagal=0;
  Object.values(analisa).forEach(a => {
    if(a.P1==="/"||a.P1==="‚úì") totalLulus++;
    else if(a.P1==="X"||a.P1==="‚úó") totalGagal++;
  });

  const kelasBM = {};
  KELAS_LIST.forEach(k => kelasBM[k] = murid.filter(m=>m.kelas===k&&m.subjek.includes("BM")).length);
  const kelasMT = {};
  KELAS_LIST.forEach(k => kelasMT[k] = murid.filter(m=>m.kelas===k&&m.subjek.includes("MT")).length);

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">Selamat Datang ke OneStop Pemulihan üëã</div>
          <div className="section-sub">{settings.nama} | Guru: {settings.guru} | Sesi {settings.sesi}</div>
        </div>
      </div>

      <div className="stats-grid">
        <div className="stat-card blue">
          <div className="stat-icon blue">üìñ</div>
          <div><div className="stat-value">{totalBM}</div><div className="stat-label">Murid Bahasa Melayu</div></div>
        </div>
        <div className="stat-card yellow">
          <div className="stat-icon yellow">üî¢</div>
          <div><div className="stat-value">{totalMT}</div><div className="stat-label">Murid Matematik</div></div>
        </div>
        <div className="stat-card green">
          <div className="stat-icon green">‚úÖ</div>
          <div><div className="stat-value">{pctHadir !== null ? pctHadir+"%" : "-"}</div><div className="stat-label">Kehadiran Bulan Ini</div></div>
        </div>
        <div className="stat-card red">
          <div className="stat-icon red">üìä</div>
          <div><div className="stat-value">{murid.length}</div><div className="stat-label">Jumlah Murid Pemulihan</div></div>
        </div>
      </div>

      <div className="grid-2" style={{marginBottom:24}}>
        <div className="card">
          <div className="card-header">
            <div className="card-title">üìä Agihan Murid Mengikut Kelas</div>
          </div>
          <div className="card-body">
            {KELAS_LIST.map(k=>(
              <div key={k} style={{marginBottom:14}}>
                <div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
                  <span style={{fontWeight:700,fontSize:13}}>Kelas {k}</span>
                  <span style={{fontSize:12,color:"var(--text-muted)"}}>BM: {kelasBM[k]} | MT: {kelasMT[k]}</span>
                </div>
                <div className="progress-bar">
                  <div className="progress-fill" style={{width:`${(kelasBM[k]/totalBM)*100}%`,background:getClassTextColor(k)}} />
                </div>
              </div>
            ))}
          </div>
        </div>

        <div className="card">
          <div className="card-header">
            <div className="card-title">üìÖ Jadual Hari Ini ‚Äî {today}</div>
          </div>
          <div className="card-body">
            {activeTodaySlots.length === 0 ? (
              <div className="text-muted text-center" style={{padding:"20px 0"}}>
                {today==="AHAD"||today==="SABTU" ? "Cuti hujung minggu üèñÔ∏è" : "Tiada sesi pemulihan hari ini"}
              </div>
            ) : (
              activeTodaySlots.map((s,i)=>(
                <div key={i} style={{display:"flex",alignItems:"center",gap:8,marginBottom:8}}>
                  <span style={{fontSize:13,fontWeight:700,color:"var(--primary)",minWidth:50}}>
                    {WAKTU_SLOTS[todaySlots.indexOf(s,todaySlots.findIndex((x,j)=>j>=0&&x===s&&todaySlots.indexOf(x)===todaySlots.findIndex((_,jj)=>jj>=0)))]}
                  </span>
                  <span className={`slot-${s.cls}`}>{s.label}</span>
                </div>
              ))
            )}
            {activeTodaySlots.length>0 && (
              <div style={{marginTop:8,padding:"8px 10px",background:"var(--primary-light)",borderRadius:8,fontSize:12,color:"var(--primary)",fontWeight:600}}>
                {activeTodaySlots.length} sesi pemulihan hari ini
              </div>
            )}
          </div>
        </div>
      </div>

      <div className="card" style={{marginBottom:24}}>
        <div className="card-header"><div className="card-title">‚ö° Pautan Pantas</div></div>
        <div className="card-body">
          <div className="quick-links">
            {[
              {id:"murid",icon:"üë•",label:"Senarai Murid"},
              {id:"kehadiran",icon:"üìã",label:"Rekod Kehadiran"},
              {id:"analisa",icon:"üìä",label:"Analisa BAPM-PMK"},
              {id:"jadual",icon:"üìÖ",label:"Jadual Waktu"},
              {id:"kemahiran",icon:"üìö",label:"Kemahiran Pemulihan"},
              {id:"laporan",icon:"üìÑ",label:"Laporan & Eksport"},
            ].map(q=>(
              <div key={q.id} className="quick-link" onClick={()=>setPage(q.id)}>
                <div className="ql-icon">{q.icon}</div>
                <div className="ql-label">{q.label}</div>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div className="card">
        <div className="card-header"><div className="card-title">‚ÑπÔ∏è Maklumat Sekolah</div></div>
        <div className="card-body">
          <div className="form-grid-2">
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:3,textTransform:"uppercase"}}>Nama Sekolah</div><div style={{fontSize:13,fontWeight:600}}>{settings.nama}</div></div>
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:3,textTransform:"uppercase"}}>Alamat</div><div style={{fontSize:13,fontWeight:600}}>{settings.alamat}</div></div>
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:3,textTransform:"uppercase"}}>Telefon</div><div style={{fontSize:13,fontWeight:600}}>{settings.tel}</div></div>
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:3,textTransform:"uppercase"}}>Guru Pemulihan</div><div style={{fontSize:13,fontWeight:600}}>{settings.guru}</div></div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============ MURID PAGE ============
function MuridPage({ murid, setMurid, addToast }) {
  const [cari, setCari] = useState("");
  const [tapKelas, setTapKelas] = useState("Semua");
  const [tapSubjek, setTapSubjek] = useState("Semua");
  const [showModal, setShowModal] = useState(false);
  const [editMurid, setEditMurid] = useState(null);
  const [form, setForm] = useState({nama:"",no_mykid:"",kelas:"2G",bangsa:"M",jantina:"L",subjek:[],catatan:""});

  const filtered = useMemo(() => murid.filter(m => {
    if(tapKelas!=="Semua" && m.kelas!==tapKelas) return false;
    if(tapSubjek!=="Semua" && !m.subjek.includes(tapSubjek)) return false;
    if(cari && !m.nama.toLowerCase().includes(cari.toLowerCase()) && !m.kelas.includes(cari.toUpperCase())) return false;
    return true;
  }), [murid, tapKelas, tapSubjek, cari]);

  function openAdd() {
    setEditMurid(null);
    setForm({nama:"",no_mykid:"",kelas:"2G",bangsa:"M",jantina:"L",subjek:["BM"],catatan:""});
    setShowModal(true);
  }
  function openEdit(m) {
    setEditMurid(m);
    setForm({...m, subjek:[...m.subjek]});
    setShowModal(true);
  }
  function deleteMurid(id) {
    if(confirm("Padam murid ini?")) {
      setMurid(p=>p.filter(m=>m.id!==id));
      addToast("Murid telah dipadam");
    }
  }
  function saveForm() {
    if(!form.nama.trim()) { alert("Sila masukkan nama murid"); return; }
    if(!form.subjek.length) { alert("Sila pilih sekurang-kurangnya satu subjek"); return; }
    if(editMurid) {
      setMurid(p=>p.map(m=>m.id===editMurid.id?{...form,id:editMurid.id}:m));
      addToast("Data murid dikemaskini");
    } else {
      setMurid(p=>[...p,{...form,id:"m"+Date.now()}]);
      addToast("Murid baru ditambah");
    }
    setShowModal(false);
  }
  function toggleSubjek(s) {
    setForm(f=>({...f,subjek:f.subjek.includes(s)?f.subjek.filter(x=>x!==s):[...f.subjek,s]}));
  }

  const bmCount = murid.filter(m=>m.subjek.includes("BM")).length;
  const mtCount = murid.filter(m=>m.subjek.includes("MT")).length;

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üë• Senarai Murid Pemulihan</div>
          <div className="section-sub">BM: {bmCount} murid | Matematik: {mtCount} murid | Jumlah: {murid.length} murid</div>
        </div>
        <button className="btn btn-primary" onClick={openAdd}>‚ûï Tambah Murid</button>
      </div>

      <div className="card">
        <div className="card-body">
          <div className="filter-bar">
            <input type="text" placeholder="üîç Cari nama murid..." value={cari} onChange={e=>setCari(e.target.value)} style={{maxWidth:250}} />
            <select value={tapKelas} onChange={e=>setTapKelas(e.target.value)}>
              <option value="Semua">Semua Kelas</option>
              {KELAS_LIST.map(k=><option key={k} value={k}>Kelas {k}</option>)}
            </select>
            <select value={tapSubjek} onChange={e=>setTapSubjek(e.target.value)}>
              <option value="Semua">Semua Subjek</option>
              <option value="BM">Bahasa Melayu</option>
              <option value="MT">Matematik</option>
            </select>
            <span style={{fontSize:13,color:"var(--text-muted)",fontWeight:600}}>
              {filtered.length} murid dijumpai
            </span>
          </div>

          {KELAS_LIST.filter(k=>tapKelas==="Semua"||tapKelas===k).map(k => {
            const kMurid = filtered.filter(m=>m.kelas===k);
            if(!kMurid.length) return null;
            return (
              <div key={k} style={{marginBottom:24}}>
                <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:12,padding:"8px 12px",background:getClassColor(k),borderRadius:10}}>
                  <span style={{fontWeight:800,fontSize:14,color:getClassTextColor(k)}}>üìö Kelas {k}</span>
                  <span style={{fontSize:12,color:getClassTextColor(k),opacity:0.8}}>{kMurid.length} murid</span>
                </div>
                <div style={{display:"grid",gap:8}}>
                  {kMurid.map((m,i)=>(
                    <div key={m.id} className="murid-card">
                      <div style={{fontSize:11,color:"var(--text-muted)",fontWeight:700,minWidth:24}}>{i+1}.</div>
                      <div className="murid-avatar" style={{background:getClassColor(m.kelas),color:getClassTextColor(m.kelas)}}>{getInitials(m.nama)}</div>
                      <div className="murid-info">
                        <div className="murid-name">{m.nama}</div>
                        <div className="murid-meta">
                          <span>MyKid: {m.no_mykid || "-"}</span>
                          <span>¬∑</span>
                          <span>{m.jantina==="L"?"Lelaki":"Perempuan"}</span>
                          <span>¬∑</span>
                          <span>{m.bangsa==="M"?"Melayu":m.bangsa==="C"?"Cina":m.bangsa==="I"?"India":"Lain"}</span>
                        </div>
                        <div style={{marginTop:4,display:"flex",gap:4,flexWrap:"wrap"}}>
                          {m.subjek.map(s=>(
                            <span key={s} className={`badge badge-${s.toLowerCase()}`}>{s==="BM"?"B. Melayu":"Matematik"}</span>
                          ))}
                          {m.catatan && <span className="skill-badge">üìù {m.catatan}</span>}
                        </div>
                      </div>
                      <div className="murid-actions">
                        <button className="btn btn-outline btn-sm" onClick={()=>openEdit(m)}>‚úèÔ∏è</button>
                        <button className="btn btn-outline btn-sm" onClick={()=>deleteMurid(m.id)}>üóëÔ∏è</button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            );
          })}
          {filtered.length===0 && <div className="text-muted text-center" style={{padding:"40px 0"}}>Tiada murid dijumpai</div>}
        </div>
      </div>

      {showModal && (
        <div className="modal-overlay" onClick={e=>{if(e.target.className==="modal-overlay")setShowModal(false)}}>
          <div className="modal">
            <div className="modal-header">
              <div className="modal-title">{editMurid?"‚úèÔ∏è Kemaskini Murid":"‚ûï Tambah Murid Baru"}</div>
              <button className="modal-close" onClick={()=>setShowModal(false)}>‚úï</button>
            </div>
            <div className="modal-body">
              <div className="form-group">
                <label>Nama Penuh (HURUF BESAR)</label>
                <input value={form.nama} onChange={e=>setForm(f=>({...f,nama:e.target.value.toUpperCase()}))} placeholder="NAMA PENUH MURID" />
              </div>
              <div className="form-grid-2">
                <div className="form-group">
                  <label>No. MyKid</label>
                  <input value={form.no_mykid} onChange={e=>setForm(f=>({...f,no_mykid:e.target.value}))} placeholder="XXXXXXXXXXXXXX" />
                </div>
                <div className="form-group">
                  <label>Kelas</label>
                  <select value={form.kelas} onChange={e=>setForm(f=>({...f,kelas:e.target.value}))}>
                    {KELAS_LIST.map(k=><option key={k} value={k}>{k}</option>)}
                  </select>
                </div>
              </div>
              <div className="form-grid-2">
                <div className="form-group">
                  <label>Bangsa</label>
                  <select value={form.bangsa} onChange={e=>setForm(f=>({...f,bangsa:e.target.value}))}>
                    <option value="M">Melayu</option>
                    <option value="C">Cina</option>
                    <option value="I">India</option>
                    <option value="L">Lain-lain</option>
                  </select>
                </div>
                <div className="form-group">
                  <label>Jantina</label>
                  <select value={form.jantina} onChange={e=>setForm(f=>({...f,jantina:e.target.value}))}>
                    <option value="L">Lelaki</option>
                    <option value="P">Perempuan</option>
                  </select>
                </div>
              </div>
              <div className="form-group">
                <label>Subjek Pemulihan</label>
                <div className="checkbox-group">
                  <label className="checkbox-item"><input type="checkbox" checked={form.subjek.includes("BM")} onChange={()=>toggleSubjek("BM")} /> Bahasa Melayu (BM)</label>
                  <label className="checkbox-item"><input type="checkbox" checked={form.subjek.includes("MT")} onChange={()=>toggleSubjek("MT")} /> Matematik (MT)</label>
                </div>
              </div>
              <div className="form-group">
                <label>Catatan</label>
                <textarea value={form.catatan} onChange={e=>setForm(f=>({...f,catatan:e.target.value}))} rows={2} placeholder="Catatan tambahan (jika ada)..." />
              </div>
            </div>
            <div className="modal-footer">
              <button className="btn btn-outline" onClick={()=>setShowModal(false)}>Batal</button>
              <button className="btn btn-primary" onClick={saveForm}>üíæ Simpan</button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

// ============ KEHADIRAN PAGE ============
function KehadiranPage({ murid, kehadiran, setKehadiran, addToast }) {
  const now = new Date();
  const [selBulan, setSelBulan] = useState(now.getMonth());
  const [selTahun, setSelTahun] = useState(now.getFullYear());
  const [selKelas, setSelKelas] = useState("2G");
  const [selSubjek, setSelSubjek] = useState("BM");

  const bulanKey = `${BULAN_LIST[selBulan]}_${selTahun}`;
  const daysInMonth = getDaysInMonth(selBulan+1, selTahun);

  const muridFiltered = murid.filter(m=>m.kelas===selKelas&&m.subjek.includes(selSubjek));

  function getRek(muridId, hari) {
    return kehadiran?.[bulanKey]?.[selKelas]?.[selSubjek]?.[muridId]?.[hari] || "";
  }

  function setRek(muridId, hari, val) {
    const cycle = {"":"H","H":"T","T":"MC","MC":""};
    const newVal = val !== undefined ? val : cycle[getRek(muridId, hari)];
    setKehadiran(prev => {
      const n = JSON.parse(JSON.stringify(prev));
      if(!n[bulanKey]) n[bulanKey]={};
      if(!n[bulanKey][selKelas]) n[bulanKey][selKelas]={};
      if(!n[bulanKey][selKelas][selSubjek]) n[bulanKey][selKelas][selSubjek]={};
      if(!n[bulanKey][selKelas][selSubjek][muridId]) n[bulanKey][selKelas][selSubjek][muridId]={};
      n[bulanKey][selKelas][selSubjek][muridId][hari] = newVal;
      return n;
    });
  }

  function markAll(hari, status) {
    muridFiltered.forEach(m => setRek(m.id, hari, status));
    addToast(`Hari ${hari}: Semua ditandakan ${status}`);
  }

  function getMuridStats(muridId) {
    const recs = kehadiran?.[bulanKey]?.[selKelas]?.[selSubjek]?.[muridId] || {};
    let H=0,T=0,MC=0;
    Object.values(recs).forEach(v=>{if(v==="H")H++;else if(v==="T")T++;else if(v==="MC")MC++;});
    const total=H+T+MC;
    return {H,T,MC,total,pct:total?getPct(H,total):0};
  }

  function exportPrint() { window.print(); }

  function getCellStyle(val) {
    if(val==="H") return "cell-H";
    if(val==="T") return "cell-T";
    if(val==="MC") return "cell-MC";
    return "cell-empty";
  }

  const days = Array.from({length:daysInMonth},(_,i)=>i+1);

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üìã Rekod Kehadiran</div>
          <div className="section-sub">Tandakan kehadiran murid harian</div>
        </div>
        <button className="btn btn-outline" onClick={exportPrint}>üñ®Ô∏è Cetak</button>
      </div>

      <div className="card" style={{marginBottom:16}}>
        <div className="card-body">
          <div className="filter-bar">
            <select value={selBulan} onChange={e=>setSelBulan(+e.target.value)}>
              {BULAN_LIST.map((b,i)=><option key={i} value={i}>{b}</option>)}
            </select>
            <select value={selTahun} onChange={e=>setSelTahun(+e.target.value)}>
              <option value={2026}>2026</option><option value={2025}>2025</option>
            </select>
            <select value={selKelas} onChange={e=>setSelKelas(e.target.value)}>
              {KELAS_LIST.map(k=><option key={k} value={k}>Kelas {k}</option>)}
            </select>
            <select value={selSubjek} onChange={e=>setSelSubjek(e.target.value)}>
              <option value="BM">Bahasa Melayu</option>
              <option value="MT">Matematik</option>
            </select>
          </div>
          <div className="legend">
            <div className="legend-item"><div className="legend-dot" style={{background:"#d1fae5"}}></div><span>H - Hadir</span></div>
            <div className="legend-item"><div className="legend-dot" style={{background:"#fee2e2"}}></div><span>T - Tidak Hadir</span></div>
            <div className="legend-item"><div className="legend-dot" style={{background:"#fef3c7"}}></div><span>MC - Surat Doktor</span></div>
            <div style={{fontSize:12,color:"var(--text-muted)"}}>* Klik sel untuk tukar status</div>
          </div>
        </div>
      </div>

      {muridFiltered.length === 0 ? (
        <div className="card"><div className="card-body text-muted text-center" style={{padding:"40px 0"}}>Tiada murid untuk kelas {selKelas} ‚Äî {selSubjek}</div></div>
      ) : (
        <div className="card">
          <div className="card-header">
            <div className="card-title">Kelas {selKelas} | {selSubjek==="BM"?"Bahasa Melayu":"Matematik"} | {BULAN_LIST[selBulan]} {selTahun}</div>
            <div style={{display:"flex",gap:6,flexWrap:"wrap"}}>
              <button className="btn btn-success btn-sm" onClick={()=>{const d=prompt("Tandakan hari (1-31) semua Hadir:"); if(d)markAll(d,"H");}}>‚úÖ Hadir (hari)</button>
              <button className="btn btn-danger btn-sm" onClick={()=>{const d=prompt("Tandakan hari (1-31) semua Tidak Hadir:"); if(d)markAll(d,"T");}}>‚ùå Tidak Hadir</button>
            </div>
          </div>
          <div className="kehadiran-grid">
            <table>
              <thead>
                <tr>
                  <th>Nama Murid</th>
                  {days.map(d=><th key={d} style={{minWidth:26}}>{d}</th>)}
                  <th>H</th><th>T</th><th>MC</th><th>%</th>
                </tr>
              </thead>
              <tbody>
                {muridFiltered.map((m,i)=>{
                  const stats = getMuridStats(m.id);
                  return (
                    <tr key={m.id}>
                      <td style={{fontSize:12,fontWeight:600,whiteSpace:"nowrap"}}>{i+1}. {m.nama.split(" ").slice(0,2).join(" ")}</td>
                      {days.map(d=>{
                        const val = getRek(m.id, d.toString());
                        return (
                          <td key={d} className={getCellStyle(val)} onClick={()=>setRek(m.id,d.toString())} title="Klik untuk tukar">
                            {val||"¬∑"}
                          </td>
                        );
                      })}
                      <td style={{fontWeight:700,color:"var(--success)"}}>{stats.H}</td>
                      <td style={{fontWeight:700,color:"var(--danger)"}}>{stats.T}</td>
                      <td style={{fontWeight:700,color:"var(--warning)"}}>{stats.MC}</td>
                      <td className={pctClass(stats.pct)}>{stats.total?stats.pct+"%":"-"}</td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        </div>
      )}
    </div>
  );
}

// ============ ANALISA PAGE ============
function AnalisaPage({ murid, analisa, setAnalisa, addToast }) {
  const [selSubjek, setSelSubjek] = useState("BM");
  const [selKelas, setSelKelas] = useState("Semua");

  function getStatus(muridId, subjek, peringkat) {
    return analisa?.[`${muridId}_${subjek}`]?.[peringkat] || null;
  }

  function cycleStatus(muridId, subjek, peringkat) {
    const cur = getStatus(muridId, subjek, peringkat);
    const next = cur===null ? "X" : cur==="X" ? "/" : null;
    const key = `${muridId}_${subjek}`;
    setAnalisa(prev => {
      const n = {...prev};
      if(!n[key]) n[key]={};
      n[key][peringkat] = next;
      return n;
    });
    addToast(`Rekod dikemaskini: ${next===null?"Kosong":next==="/"?"Melepasi":"Tidak Melepasi"}`);
  }

  function renderStatus(muridId, subjek, peringkat) {
    const val = getStatus(muridId, subjek, peringkat);
    return (
      <td style={{textAlign:"center",cursor:"pointer"}} onClick={()=>cycleStatus(muridId,subjek,peringkat)} title="Klik untuk tukar">
        {val===null ? <span style={{color:"#cbd5e1",fontSize:16}}>‚Äî</span>
         : val==="/" ? <span style={{color:"var(--success)",fontSize:20,fontWeight:800}}>‚úì</span>
         : <span style={{color:"var(--danger)",fontSize:20,fontWeight:800}}>‚úó</span>}
      </td>
    );
  }

  const muridFiltered = murid.filter(m =>
    m.subjek.includes(selSubjek) &&
    (selKelas==="Semua" || m.kelas===selKelas)
  );

  // Summary per kelas
  const summary = KELAS_LIST.map(k=>{
    const km = murid.filter(m=>m.kelas===k&&m.subjek.includes(selSubjek));
    const p1L = km.filter(m=>getStatus(m.id,selSubjek,"P1")==="/").length;
    const p1G = km.filter(m=>getStatus(m.id,selSubjek,"P1")==="X").length;
    const p2L = km.filter(m=>getStatus(m.id,selSubjek,"P2")==="/").length;
    const p2G = km.filter(m=>getStatus(m.id,selSubjek,"P2")==="X").length;
    const p3L = km.filter(m=>getStatus(m.id,selSubjek,"P3")==="/").length;
    const p3G = km.filter(m=>getStatus(m.id,selSubjek,"P3")==="X").length;
    return {k, total:km.length, p1L, p1G, p2L, p2G, p3L, p3G};
  });

  const totals = summary.reduce((acc,s)=>({
    total:acc.total+s.total, p1L:acc.p1L+s.p1L, p1G:acc.p1G+s.p1G,
    p2L:acc.p2L+s.p2L, p2G:acc.p2G+s.p2G, p3L:acc.p3L+s.p3L, p3G:acc.p3G+s.p3G
  }), {total:0,p1L:0,p1G:0,p2L:0,p2G:0,p3L:0,p3G:0});

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üìä Borang Analisa Pencapaian (BAPM-PMK)</div>
          <div className="section-sub">P1=Pengesanan | P2=Pelepasan 1 | P3=Pelepasan 2 | Klik sel untuk tukar status</div>
        </div>
        <button className="btn btn-outline" onClick={()=>window.print()}>üñ®Ô∏è Cetak</button>
      </div>

      <div style={{display:"flex",gap:12,marginBottom:20,flexWrap:"wrap"}}>
        <div className="tabs">
          <div className={`tab ${selSubjek==="BM"?"active":""}`} onClick={()=>setSelSubjek("BM")}>üìñ Bahasa Melayu</div>
          <div className={`tab ${selSubjek==="MT"?"active":""}`} onClick={()=>setSelSubjek("MT")}>üî¢ Matematik</div>
        </div>
        <select value={selKelas} onChange={e=>setSelKelas(e.target.value)} style={{height:40,borderRadius:8,padding:"0 12px",border:"1.5px solid var(--border)",fontFamily:"inherit",fontSize:13}}>
          <option value="Semua">Semua Kelas</option>
          {KELAS_LIST.map(k=><option key={k} value={k}>Kelas {k}</option>)}
        </select>
      </div>

      <div className="info-box">
        ‚úì = Melepasi / Lulus &nbsp;|&nbsp; ‚úó = Tidak Melepasi / Gagal &nbsp;|&nbsp; ‚Äî = Belum dinilai &nbsp;&nbsp; <strong>Klik sel untuk tukar status</strong>
      </div>

      <div className="card" style={{marginBottom:20}}>
        <div className="card-header"><div className="card-title">üìã Rumusan Analisa ‚Äî {selSubjek==="BM"?"Bahasa Melayu":"Matematik"}</div></div>
        <div className="table-wrap">
          <table className="summary-table">
            <thead>
              <tr>
                <th>Tahun/Kelas</th><th>Bil Murid</th>
                <th>P1 Lulus</th><th>P1 Gagal</th>
                <th>P2 Lulus</th><th>P2 Gagal</th>
                <th>P3 Lulus</th><th>P3 Gagal</th>
              </tr>
            </thead>
            <tbody>
              {summary.map(s=>(
                <tr key={s.k}>
                  <td style={{fontWeight:700}}><span className={`badge badge-${s.k.toLowerCase()}`}>Kelas {s.k}</span></td>
                  <td>{s.total}</td>
                  <td style={{color:"var(--success)",fontWeight:700}}>{s.p1L}</td><td style={{color:"var(--danger)",fontWeight:700}}>{s.p1G}</td>
                  <td style={{color:"var(--success)",fontWeight:700}}>{s.p2L}</td><td style={{color:"var(--danger)",fontWeight:700}}>{s.p2G}</td>
                  <td style={{color:"var(--success)",fontWeight:700}}>{s.p3L}</td><td style={{color:"var(--danger)",fontWeight:700}}>{s.p3G}</td>
                </tr>
              ))}
              <tr style={{background:"var(--primary-light)",fontWeight:800}}>
                <td>JUMLAH</td><td>{totals.total}</td>
                <td style={{color:"var(--success)"}}>{totals.p1L}</td><td style={{color:"var(--danger)"}}>{totals.p1G}</td>
                <td style={{color:"var(--success)"}}>{totals.p2L}</td><td style={{color:"var(--danger)"}}>{totals.p2G}</td>
                <td style={{color:"var(--success)"}}>{totals.p3L}</td><td style={{color:"var(--danger)"}}>{totals.p3G}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div className="card">
        <div className="card-header"><div className="card-title">üìù Rekod Individu ‚Äî {selSubjek==="BM"?"Bahasa Melayu":"Matematik"}</div></div>
        <div className="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Bil</th><th>Nama Murid</th><th>Kelas</th><th>Jantina</th>
                <th style={{textAlign:"center"}}>P1</th>
                <th style={{textAlign:"center"}}>P2</th>
                <th style={{textAlign:"center"}}>P3</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              {muridFiltered.map((m,i)=>{
                const p3 = getStatus(m.id,selSubjek,"P3");
                const p2 = getStatus(m.id,selSubjek,"P2");
                const statusLabel = p3==="/" ? <span className="badge badge-hadir">Tamat</span>
                  : p2==="/" ? <span className="badge" style={{background:"#dbeafe",color:"#1d4ed8"}}>P3</span>
                  : <span className="badge badge-tidak">Dalam Proses</span>;
                return (
                  <tr key={m.id}>
                    <td style={{color:"var(--text-muted)",fontSize:12}}>{i+1}</td>
                    <td style={{fontWeight:600,fontSize:13}}>{m.nama}</td>
                    <td><span className={`badge badge-${m.kelas.toLowerCase()}`}>{m.kelas}</span></td>
                    <td>{m.jantina==="L"?"L":"P"}</td>
                    {renderStatus(m.id,selSubjek,"P1")}
                    {renderStatus(m.id,selSubjek,"P2")}
                    {renderStatus(m.id,selSubjek,"P3")}
                    <td>{statusLabel}</td>
                  </tr>
                );
              })}
            </tbody>
          </table>
        </div>
        {muridFiltered.length===0 && <div className="text-muted text-center" style={{padding:"40px 0"}}>Tiada murid untuk paparan ini</div>}
      </div>
    </div>
  );
}

// ============ JADUAL PAGE ============
function JadualPage() {
  const [view, setView] = useState("guru");
  const [selKelas, setSelKelas] = useState("2G");

  const days = ["ISNIN","SELASA","RABU","KHAMIS","JUMAAT"];

  function slotClass(cls) {
    const map = {
      "bm-2g":"slot-bm-2g","bm-3b":"slot-bm-3b","bm-4g":"slot-bm-4g","bm-5c":"slot-bm-5c",
      "mt-2g":"slot-mt-2g","mt-3b":"slot-mt-3b","mt-4g":"slot-mt-4g","mt-5c":"slot-mt-5c",
      "per":"slot-per","wp":"slot-wp","koko":"slot-koko","1m1s":"slot-1m1s","empty":"slot-empty"
    };
    return map[cls] || "slot-empty";
  }

  const JADUAL_KELAS = {
    "2G": {
      SELASA: [{i:7,label:"BM 2G"},{i:8,label:"BM 2G"},{i:9,label:"MT 2G"},{i:10,label:"MT 2G"}],
      KHAMIS: [{i:7,label:"BM 2G"},{i:8,label:"BM 2G"}],
      JUMAAT: [{i:0,label:"BM 2G"},{i:1,label:"BM 2G"}]
    },
    "3B": {
      ISNIN: [{i:7,label:"BM 3B"},{i:8,label:"BM 3B"}],
      RABU: [{i:6,label:"BM 3B"},{i:7,label:"BM 3B"}],
      KHAMIS: [{i:5,label:"BM 3B"},{i:6,label:"BM 3B"}],
      JUMAAT: [{i:5,label:"MT 3B"},{i:6,label:"MT 3B"}]
    },
    "4G": {
      ISNIN: [{i:1,label:"BM 4G"},{i:2,label:"BM 4G"}],
      SELASA: [{i:4,label:"MT 4G"},{i:5,label:"MT 4G"}],
      RABU: [{i:9,label:"BM 4G"},{i:10,label:"BM 4G"}],
      KHAMIS: [{i:11,label:"BM 4G"}]
    },
    "5C": {
      ISNIN: [{i:4,label:"MT 5C"},{i:5,label:"MT 5C"}],
      SELASA: [{i:1,label:"BM 5C"},{i:2,label:"BM 5C"}],
      KHAMIS: [{i:1,label:"BM 5C"},{i:2,label:"BM 5C"}]
    }
  };

  function getKelasSlot(kelas, day, slotIdx) {
    const slots = JADUAL_KELAS[kelas]?.[day] || [];
    const s = slots.find(x=>x.i===slotIdx);
    if(!s) return null;
    const sub = s.label.startsWith("BM")?"bm":"mt";
    return {label:s.label, cls:`${sub}-${kelas.toLowerCase()}`};
  }

  const analisis = [
    {subjek:"BM",kelas:"2G",waktu:6,minit:180},{subjek:"BM",kelas:"3B",waktu:6,minit:180},
    {subjek:"BM",kelas:"4G",waktu:5,minit:150},{subjek:"BM",kelas:"5C",waktu:5,minit:150},
    {subjek:"MT",kelas:"2G",waktu:2,minit:60},{subjek:"MT",kelas:"3B",waktu:2,minit:60},
    {subjek:"MT",kelas:"4G",waktu:2,minit:60},{subjek:"MT",kelas:"5C",waktu:2,minit:60},
    {subjek:"Persediaan Mengajar",kelas:"-",waktu:4,minit:120}
  ];

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üìÖ Jadual Waktu Pemulihan</div>
          <div className="section-sub">Jadual guru & per kelas</div>
        </div>
        <button className="btn btn-outline" onClick={()=>window.print()}>üñ®Ô∏è Cetak</button>
      </div>

      <div className="tabs">
        <div className={`tab ${view==="guru"?"active":""}`} onClick={()=>setView("guru")}>üë®‚Äçüè´ Jadual Guru</div>
        <div className={`tab ${view==="kelas"?"active":""}`} onClick={()=>setView("kelas")}>üìö Jadual Per Kelas</div>
        <div className={`tab ${view==="analisis"?"active":""}`} onClick={()=>setView("analisis")}>üìä Analisis Waktu</div>
      </div>

      {view==="guru" && (
        <div className="card">
          <div className="card-header">
            <div className="card-title">Jadual Waktu Guru ‚Äî Asqalani Bin Suhaimi</div>
          </div>
          <div className="jadual-grid">
            <table>
              <thead>
                <tr>
                  <th>WAKTU</th>
                  {days.map(d=><th key={d}>{d}</th>)}
                </tr>
              </thead>
              <tbody>
                {WAKTU_SLOTS.map((w,i)=>(
                  <tr key={i}>
                    <td style={{fontSize:11,color:"var(--text-muted)",fontWeight:600,whiteSpace:"nowrap",background:"var(--bg)"}}>{w}</td>
                    {days.map(d=>{
                      const slot = JADUAL_GURU[d][i];
                      return (
                        <td key={d}>
                          {slot && slot.cls!=="empty" ? (
                            <span className={slotClass(slot.cls)}>{slot.label}</span>
                          ) : <span className="slot-empty">‚Äî</span>}
                        </td>
                      );
                    })}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <div className="card-body" style={{paddingTop:16}}>
            <div className="legend">
              {KELAS_LIST.map(k=>(
                <div key={k} style={{display:"flex",gap:6,flexWrap:"wrap"}}>
                  <div className="legend-item"><div className="legend-dot" style={{background:getClassColor(k)}}></div><span style={{color:getClassTextColor(k)}}>BM {k}</span></div>
                </div>
              ))}
              <div className="legend-item"><div className="legend-dot" style={{background:"#dbeafe"}}></div><span>PER = Persediaan</span></div>
              <div className="legend-item"><div className="legend-dot" style={{background:"#fce7f3"}}></div><span>WP = Waktu Peribadi</span></div>
            </div>
          </div>
        </div>
      )}

      {view==="kelas" && (
        <div>
          <div style={{marginBottom:16}}>
            <div className="tabs">
              {KELAS_LIST.map(k=><div key={k} className={`tab ${selKelas===k?"active":""}`} onClick={()=>setSelKelas(k)}>Kelas {k}</div>)}
            </div>
          </div>
          <div className="card">
            <div className="card-header"><div className="card-title">Jadual Waktu ‚Äî Kelas {selKelas}</div></div>
            <div className="jadual-grid">
              <table>
                <thead>
                  <tr>
                    <th>WAKTU</th>
                    {days.map(d=><th key={d}>{d}</th>)}
                  </tr>
                </thead>
                <tbody>
                  {WAKTU_SLOTS.map((w,i)=>(
                    <tr key={i}>
                      <td style={{fontSize:11,color:"var(--text-muted)",fontWeight:600,whiteSpace:"nowrap",background:"var(--bg)"}}>{w}</td>
                      {days.map(d=>{
                        const slot = getKelasSlot(selKelas, d, i);
                        return (
                          <td key={d}>
                            {slot ? <span className={slotClass(slot.cls)}>{slot.label}</span>
                              : <span className="slot-empty">‚Äî</span>}
                          </td>
                        );
                      })}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      )}

      {view==="analisis" && (
        <div className="card">
          <div className="card-header"><div className="card-title">üìä Analisis Penggunaan Waktu (Per Minggu)</div></div>
          <div className="table-wrap">
            <table>
              <thead>
                <tr><th>Subjek</th><th>Kelas</th><th>Waktu/Minggu</th><th>Minit/Minggu</th></tr>
              </thead>
              <tbody>
                {analisis.map((a,i)=>(
                  <tr key={i} style={i===analisis.length-1?{background:"var(--primary-light)",fontWeight:700}:{}}>
                    <td><span className={`badge badge-${a.subjek==="BM"?"bm":a.subjek==="MT"?"math":"hadir"}`}>{a.subjek}</span></td>
                    <td>{a.kelas}</td>
                    <td style={{fontWeight:700}}>{a.waktu}</td>
                    <td style={{fontWeight:700}}>{a.minit} minit</td>
                  </tr>
                ))}
                <tr style={{background:"#0f2d6b",color:"white",fontWeight:800}}>
                  <td colSpan={2}>JUMLAH KESELURUHAN</td>
                  <td>34 waktu</td>
                  <td>1020 minit</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      )}
    </div>
  );
}

// ============ KEMAHIRAN PAGE ============
function KemahiranPage() {
  const [tab, setTab] = useState("bm");
  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üìö Kemahiran Pemulihan</div>
          <div className="section-sub">Senarai kemahiran berdasarkan Buku Panduan P&P</div>
        </div>
      </div>

      <div className="tabs">
        <div className={`tab ${tab==="bm"?"active":""}`} onClick={()=>setTab("bm")}>üìñ Bahasa Melayu</div>
        <div className={`tab ${tab==="mt"?"active":""}`} onClick={()=>setTab("mt")}>üî¢ Matematik</div>
      </div>

      {tab==="bm" && (
        <div className="card">
          <div className="card-header"><div className="card-title">Pemetaan Kemahiran Pemulihan Bahasa Melayu</div></div>
          <div className="card-body">
            <div style={{marginBottom:20}}>
              <div style={{background:"var(--primary-light)",padding:"10px 16px",borderRadius:10,marginBottom:12}}>
                <div style={{fontWeight:700,fontSize:13,color:"var(--primary)",marginBottom:6}}>Prabacaan dan Pratulis</div>
                <span className="skill-badge" style={{background:"var(--primary-light)",color:"var(--primary)"}}>KP - Prabacaan dan Pratulisan</span>
              </div>
              {[
                {kategori:"Abjad",color:"#ede9fe",tc:"#5b21b6",kp:["KP1 - Huruf-huruf vokal","KP2 - Huruf-huruf kecil","KP3 - Huruf-huruf besar"]},
                {kategori:"Suku Kata",color:"#fee2e2",tc:"#991b1b",kp:["KP4 - Suku kata KV","KP9 - Suku kata KVK","KP17 - Suku Kata KVKK"]},
                {kategori:"Perkataan",color:"#d1fae5",tc:"#065f46",kp:[
                  "KP5 - Perkataan KV+KV","KP6 - Perkataan V+KV","KP7 - Perkataan KV+KV+KV","KP8 - Perkataan KVK",
                  "KP10 - Perkataan V+KVK","KP11 - Perkataan KV+KVK","KP12 - Perkataan KVK+KV","KP13 - Perkataan KVK+KVK",
                  "KP14 - Perkataan KV+KV+KVK","KP15 - Perkataan KVK+KV+KVK","KP16 - Perkataan KVKK","KP17 - Perkataan KV+KVKK (Suku)",
                  "KP18 - Perkataan KV+KVKK","KP19 - Perkataan V+KVKK","KP20 - Perkataan KVK+KVKK","KP21 - Perkataan KVKK+KV",
                  "KP22 - Perkataan KVKK+KVK","KP23 - Perkataan KVKK+KVKK","KP24 - Perkataan KV+KV+KVKK",
                  "KP25 - Perkataan KV+KVK+KVKK","KP26 - Perkataan KVK+KV+KVKK","KP27 - Perkataan KVKK+KV+KVK",
                  "KP28 - Perkataan KV+KVKK+KVK","KP29 - Perkataan diftong dan vokal berganding",
                  "KP30 - Perkataan huruf konsonan bergabung (digraf)"
                ]},
                {kategori:"Ayat",color:"#ffedd5",tc:"#9a3412",kp:["KP31 - Membaca dan membina ayat mudah","KP32 - Bacaan dan Pemahaman"]}
              ].map(g=>(
                <div key={g.kategori} style={{background:g.color,padding:"12px 16px",borderRadius:10,marginBottom:12}}>
                  <div style={{fontWeight:800,fontSize:13,color:g.tc,marginBottom:8}}>{g.kategori}</div>
                  <div style={{display:"flex",flexWrap:"wrap",gap:4}}>
                    {g.kp.map(k=><span key={k} className="skill-badge" style={{background:"rgba(255,255,255,0.7)",color:g.tc}}>{k}</span>)}
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      )}

      {tab==="mt" && (
        <div className="card">
          <div className="card-header"><div className="card-title">Kemahiran Pemulihan Matematik</div></div>
          <div className="card-body">
            {[
              {kategori:"Asas Nombor",color:"#dbeafe",tc:"#1d4ed8",kp:["1 - Pra Nombor","2 - Konsep Nombor","3.1 - Nombor Bulat Hingga 10","3.2 - Nombor Bulat Hingga 20","3.3 - Nombor Bulat Hingga 100","3.4 - Nombor Bulat Hingga 1000"]},
              {kategori:"Operasi Asas",color:"#d1fae5",tc:"#065f46",kp:["4.1 - Tambah Dlm Lingkungan 10","4.2 - Tambah Dlm Lingkungan 18","4.3 - Tambah Dlm Lingkungan 100","4.4 - Tambah Dlm Lingkungan 1000","5.1 - Tolak Dlm Lingkungan 10","5.2 - Tolak Dlm Lingkungan 18","5.3 - Tolak Dlm Lingkungan 100","5.4 - Tolak Dlm Lingkungan 1000","6 - Operasi Darab","7 - Operasi Bahagi"]},
              {kategori:"Wang & Masa",color:"#ffedd5",tc:"#9a3412",kp:["8.1 - Wang Hingga RM10","8.2 - Wang Hingga RM100","8.3 - Wang Hingga RM1000","9 - Masa dan Waktu"]}
            ].map(g=>(
              <div key={g.kategori} style={{background:g.color,padding:"12px 16px",borderRadius:10,marginBottom:12}}>
                <div style={{fontWeight:800,fontSize:13,color:g.tc,marginBottom:8}}>{g.kategori}</div>
                <div style={{display:"flex",flexWrap:"wrap",gap:4}}>
                  {g.kp.map(k=><span key={k} className="skill-badge" style={{background:"rgba(255,255,255,0.7)",color:g.tc}}>{k}</span>)}
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

// ============ LAPORAN PAGE ============
function LaporanPage({ murid, kehadiran, analisa, addToast }) {
  function exportJSON() {
    const data = { murid, kehadiran, analisa, tarikh_eksport: new Date().toISOString(), sekolah: "SKSA" };
    const blob = new Blob([JSON.stringify(data, null, 2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url; a.download=`backup_pemulihan_sksa_${new Date().toISOString().slice(0,10)}.json`;
    a.click(); URL.revokeObjectURL(url);
    addToast("Data berjaya dieksport ke JSON");
  }

  function exportCSV() {
    const rows = [["Bil","Nama","No MyKid","Kelas","Bangsa","Jantina","Subjek","Catatan"]];
    murid.forEach((m,i)=>rows.push([i+1,m.nama,m.no_mykid,m.kelas,m.bangsa,m.jantina,m.subjek.join("+"),m.catatan]));
    const csv = rows.map(r=>r.map(c=>`"${c}"`).join(",")).join("\n");
    const blob = new Blob(["\ufeff"+csv],{type:"text/csv;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url; a.download="senarai_murid_pemulihan_sksa.csv";
    a.click(); URL.revokeObjectURL(url);
    addToast("CSV berjaya dieksport");
  }

  const totalBM = murid.filter(m=>m.subjek.includes("BM")).length;
  const totalMT = murid.filter(m=>m.subjek.includes("MT")).length;
  const jumlahL = murid.filter(m=>m.jantina==="L").length;
  const jumlahP = murid.filter(m=>m.jantina==="P").length;
  const jumlahM = murid.filter(m=>m.bangsa==="M").length;
  const jumlahI = murid.filter(m=>m.bangsa==="I").length;
  const jumlahC = murid.filter(m=>m.bangsa==="C").length;

  return (
    <div>
      <div className="section-header">
        <div>
          <div className="section-title">üìÑ Laporan & Eksport Data</div>
          <div className="section-sub">Jana laporan, eksport dan cetak borang rasmi</div>
        </div>
      </div>

      <div className="stats-grid" style={{gridTemplateColumns:"repeat(3,1fr)",marginBottom:24}}>
        <div className="stat-card blue">
          <div className="stat-icon blue">üìñ</div>
          <div><div className="stat-value">{totalBM}</div><div className="stat-label">Murid BM</div></div>
        </div>
        <div className="stat-card yellow">
          <div className="stat-icon yellow">üî¢</div>
          <div><div className="stat-value">{totalMT}</div><div className="stat-label">Murid MT</div></div>
        </div>
        <div className="stat-card green">
          <div className="stat-icon green">üë•</div>
          <div><div className="stat-value">{murid.length}</div><div className="stat-label">Jumlah Murid</div></div>
        </div>
      </div>

      <div className="grid-2" style={{marginBottom:24}}>
        <div className="card">
          <div className="card-header"><div className="card-title">üë´ Pecahan Jantina</div></div>
          <div className="card-body">
            <div style={{marginBottom:12}}>
              <div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
                <span style={{fontSize:13,fontWeight:600}}>Lelaki</span>
                <span style={{fontSize:13,fontWeight:700,color:"var(--primary)"}}>{jumlahL} ({getPct(jumlahL,murid.length)}%)</span>
              </div>
              <div className="progress-bar"><div className="progress-fill" style={{width:`${getPct(jumlahL,murid.length)}%`,background:"var(--primary)"}} /></div>
            </div>
            <div>
              <div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
                <span style={{fontSize:13,fontWeight:600}}>Perempuan</span>
                <span style={{fontSize:13,fontWeight:700,color:"#ec4899"}}>{jumlahP} ({getPct(jumlahP,murid.length)}%)</span>
              </div>
              <div className="progress-bar"><div className="progress-fill" style={{width:`${getPct(jumlahP,murid.length)}%`,background:"#ec4899"}} /></div>
            </div>
          </div>
        </div>
        <div className="card">
          <div className="card-header"><div className="card-title">üåè Pecahan Bangsa</div></div>
          <div className="card-body">
            {[{label:"Melayu",count:jumlahM,color:"#1a56db"},{label:"India",count:jumlahI,color:"#f97316"},{label:"Cina",count:jumlahC,color:"#10b981"}].map(b=>(
              <div key={b.label} style={{marginBottom:12}}>
                <div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
                  <span style={{fontSize:13,fontWeight:600}}>{b.label}</span>
                  <span style={{fontSize:13,fontWeight:700,color:b.color}}>{b.count} ({getPct(b.count,murid.length)}%)</span>
                </div>
                <div className="progress-bar"><div className="progress-fill" style={{width:`${getPct(b.count,murid.length)}%`,background:b.color}} /></div>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div className="card" style={{marginBottom:24}}>
        <div className="card-header"><div className="card-title">üìä Agihan Mengikut Kelas</div></div>
        <div className="table-wrap">
          <table>
            <thead>
              <tr><th>Kelas</th><th>BM</th><th>Matematik</th><th>Jumlah</th><th>Lelaki</th><th>Perempuan</th></tr>
            </thead>
            <tbody>
              {KELAS_LIST.map(k=>{
                const km = murid.filter(m=>m.kelas===k);
                return (
                  <tr key={k}>
                    <td><span className={`badge badge-${k.toLowerCase()}`}>Kelas {k}</span></td>
                    <td>{km.filter(m=>m.subjek.includes("BM")).length}</td>
                    <td>{km.filter(m=>m.subjek.includes("MT")).length}</td>
                    <td style={{fontWeight:700}}>{km.length}</td>
                    <td>{km.filter(m=>m.jantina==="L").length}</td>
                    <td>{km.filter(m=>m.jantina==="P").length}</td>
                  </tr>
                );
              })}
              <tr style={{background:"var(--primary-light)",fontWeight:800}}>
                <td>JUMLAH</td>
                <td>{totalBM}</td><td>{totalMT}</td><td>{murid.length}</td>
                <td>{jumlahL}</td><td>{jumlahP}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div className="laporan-grid">
        <div className="laporan-card" onClick={exportJSON}>
          <div className="lc-icon">üíæ</div>
          <div className="lc-title">Eksport Backup JSON</div>
          <div className="lc-desc">Simpan semua data ke fail JSON untuk backup</div>
        </div>
        <div className="laporan-card" onClick={exportCSV}>
          <div className="lc-icon">üìä</div>
          <div className="lc-title">Eksport CSV Senarai Murid</div>
          <div className="lc-desc">Eksport senarai murid ke format CSV</div>
        </div>
        <div className="laporan-card" onClick={()=>window.print()}>
          <div className="lc-icon">üñ®Ô∏è</div>
          <div className="lc-title">Cetak Halaman Ini</div>
          <div className="lc-desc">Cetak laporan dalam format print-friendly</div>
        </div>
        <div className="laporan-card" onClick={()=>{
          const info = `LAPORAN PROGRAM PEMULIHAN KHAS\nSK SRI AMAN, AYER ITAM, PULAU PINANG\nSesi 2026\n\nJumlah Murid BM: ${totalBM}\nJumlah Murid MT: ${totalMT}\nJumlah Keseluruhan: ${murid.length}\n\nTarikh Jana: ${todayStr()}`;
          const blob = new Blob([info],{type:"text/plain;charset=utf-8"});
          const url=URL.createObjectURL(blob);
          const a=document.createElement("a"); a.href=url; a.download="laporan_pemulihan_sksa.txt"; a.click();
          addToast("Laporan ringkas berjaya dieksport");
        }}>
          <div className="lc-icon">üìù</div>
          <div className="lc-title">Laporan Ringkas TXT</div>
          <div className="lc-desc">Jana laporan ringkas dalam format teks</div>
        </div>
      </div>
    </div>
  );
}

// ============ TETAPAN PAGE ============
function TetapanPage({ settings, setSettings, murid, setMurid, kehadiran, setKehadiran, analisa, setAnalisa, addToast }) {
  const [form, setForm] = useState({...settings});
  const fileRef = React.useRef();

  function saveSettings() {
    setSettings(form);
    addToast("Tetapan berjaya disimpan");
  }

  function importJSON(e) {
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = ev => {
      try {
        const data = JSON.parse(ev.target.result);
        if(data.murid) setMurid(data.murid);
        if(data.kehadiran) setKehadiran(data.kehadiran);
        if(data.analisa) setAnalisa(data.analisa);
        addToast("Data berjaya diimport");
      } catch { addToast("Fail tidak sah", "error"); }
    };
    reader.readAsText(file);
  }

  function resetAll() {
    if(confirm("‚ö†Ô∏è Ini akan MEMADAM semua data kehadiran dan analisa. Senarai murid akan dikembalikan ke asal. Teruskan?")) {
      setMurid(MURID_INITIAL);
      setKehadiran({});
      setAnalisa({});
      addToast("Data telah ditetapkan semula");
    }
  }

  function resetMurid() {
    if(confirm("Reset senarai murid ke data asal?")) {
      setMurid(MURID_INITIAL);
      addToast("Senarai murid telah direset");
    }
  }

  return (
    <div>
      <div className="section-header">
        <div><div className="section-title">‚öôÔ∏è Tetapan Aplikasi</div></div>
      </div>

      <div className="grid-2" style={{marginBottom:24}}>
        <div className="card">
          <div className="card-header"><div className="card-title">üè´ Maklumat Sekolah</div></div>
          <div className="card-body">
            <div className="form-group">
              <label>Nama Sekolah</label>
              <input value={form.nama} onChange={e=>setForm(f=>({...f,nama:e.target.value}))} />
            </div>
            <div className="form-group">
              <label>Alamat</label>
              <input value={form.alamat} onChange={e=>setForm(f=>({...f,alamat:e.target.value}))} />
            </div>
            <div className="form-group">
              <label>Telefon / Faks</label>
              <input value={form.tel} onChange={e=>setForm(f=>({...f,tel:e.target.value}))} />
            </div>
            <div className="form-group">
              <label>E-mel</label>
              <input value={form.emel} onChange={e=>setForm(f=>({...f,emel:e.target.value}))} />
            </div>
            <div className="form-group">
              <label>Nama Guru Pemulihan</label>
              <input value={form.guru} onChange={e=>setForm(f=>({...f,guru:e.target.value}))} />
            </div>
            <div className="form-group">
              <label>Sesi Akademik</label>
              <input value={form.sesi} onChange={e=>setForm(f=>({...f,sesi:e.target.value}))} />
            </div>
            <button className="btn btn-primary" onClick={saveSettings}>üíæ Simpan Tetapan</button>
          </div>
        </div>

        <div>
          <div className="card" style={{marginBottom:16}}>
            <div className="card-header"><div className="card-title">üîÑ Import & Eksport Data</div></div>
            <div className="card-body">
              <p style={{fontSize:13,color:"var(--text-muted)",marginBottom:16}}>Import data dari fail JSON backup atau eksport semua data.</p>
              <input type="file" ref={fileRef} accept=".json" onChange={importJSON} style={{display:"none"}} />
              <div style={{display:"flex",flexDirection:"column",gap:8}}>
                <button className="btn btn-outline" onClick={()=>fileRef.current.click()}>üìÇ Import dari JSON</button>
              </div>
            </div>
          </div>

          <div className="card">
            <div className="card-header"><div className="card-title" style={{color:"var(--danger)"}}>‚ö†Ô∏è Zon Berbahaya</div></div>
            <div className="card-body">
              <p style={{fontSize:13,color:"var(--text-muted)",marginBottom:16}}>Tindakan berikut <strong>tidak boleh dibatalkan</strong>. Sila buat backup terlebih dahulu.</p>
              <div style={{display:"flex",flexDirection:"column",gap:8}}>
                <button className="btn btn-outline" onClick={resetMurid} style={{borderColor:"var(--warning)",color:"var(--warning)"}}>üîÑ Reset Senarai Murid ke Asal</button>
                <button className="btn btn-danger" onClick={resetAll}>üóëÔ∏è Reset Semua Data</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="card">
        <div className="card-header"><div className="card-title">‚ÑπÔ∏è Maklumat Aplikasi</div></div>
        <div className="card-body">
          <div className="form-grid-3">
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:4}}>NAMA APLIKASI</div><div style={{fontSize:13,fontWeight:600}}>OneStop Pemulihan SKSA</div></div>
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:4}}>VERSI</div><div style={{fontSize:13,fontWeight:600}}>1.0.0 (2026)</div></div>
            <div><div style={{fontSize:11,fontWeight:700,color:"var(--text-muted)",marginBottom:4}}>STORAN</div><div style={{fontSize:13,fontWeight:600}}>LocalStorage (Offline)</div></div>
          </div>
          <div style={{marginTop:16,padding:"10px 14px",background:"var(--primary-light)",borderRadius:8,fontSize:12,color:"var(--primary)"}}>
            üí° Data disimpan secara automatik dalam pelayar web ini. Gunakan fungsi Eksport untuk membuat backup secara berkala.
          </div>
        </div>
      </div>
    </div>
  );
}

// Mount
ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
